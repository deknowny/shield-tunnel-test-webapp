(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9461:function(e,t,n){Promise.resolve().then(n.bind(n,5622))},5622:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var i=n(7437),o=n(7976),r=n(2265),l=n(5423),s=n(2914),a=n(6238),c=n(4387),d=n(4697),h=n(9190),u=n(3364);function p(e,t,n){let i=new Date(e).getTime()/1e3-Date.now()/1e3,o=Math.floor(i/86400),r=Math.floor(i%86400/3600),l=Math.floor(i%86400%3600/60);var s=[];return 0!=o&&s.length<t&&s.push("".concat(o," ").concat((0,u._6)(o,"день","дня","дней"))),0!=r&&s.length<t&&s.push("".concat(r," ").concat((0,u._6)(r,"час","часа","часов"))),0!=r&&s.length<t&&s.push("".concat(l," ").concat((0,u._6)(l,"минута","минуты","минут"))),s.join(n)}let x=r.createContext([void 0,()=>{}]);function g(e){let[t,n]=(0,r.useState)(),o=()=>{var e;let i=new Headers;i.set("Authorization","tma ".concat(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp.initData)),fetch("https://api.infinitymainserver.tech/me",{method:"PUT",headers:i}).then(e=>e.json()).then(e=>{n(e),console.log("meData updated",t)}).catch(e=>console.log(e))};return(0,r.useEffect)(()=>{var e;null===(e=window.Telegram)||void 0===e||e.WebApp.ready(),o()},[]),console.log("me data",t),(0,i.jsx)(x.Provider,{value:[t,o],children:e.children})}function j(){return(0,r.useContext)(x)}var v=n(1431),f=n(6920),m=n(5079),b=n(6648);function C(e){let{profileId:t,setProfileId:n,currentPaidTo:l,paidCallback:s}=e,[a,u]=j(),[p,x]=(0,r.useState)("monthly"),[g,v]=(0,r.useState)(void 0);return(0,r.useEffect)(()=>{void 0!==g&&clearInterval(g),void 0!==t&&v(setInterval(()=>{var e;let i=new Headers;i.set("Authorization","tma ".concat(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp.initData)),fetch("https://api.infinitymainserver.tech/vpn-profiles/paid-to",{body:JSON.stringify({profile_id:t}),method:"POST",headers:i}).then(e=>e.json()).then(e=>{if((e.paid_to?new Date(e.paid_to).getTime():0)>(l?new Date(e.paid_to).getTime():0)){var t,i;clearInterval(g),u(),n(void 0),s(!0),null===(t=window.Telegram)||void 0===t||t.WebApp.MainButton.hideProgress(),null===(i=window.Telegram)||void 0===i||i.WebApp.MainButton.hide()}}).catch(e=>console.log(e))},2e3))},[t]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.u_,{header:(0,i.jsx)(d.x,{after:(0,i.jsx)(h.A,{children:(0,i.jsx)(c.w,{onClick:()=>{n(void 0),s(!1)},style:{color:"var(--tgui--plain_foreground)"}})}),children:"Оплата"}),onOpenChange:e=>{e||(n(void 0),s(!1))},open:void 0!==t,children:(0,i.jsx)("div",{style:{height:"100%",width:"100%",background:"var(--tgui--secondary_bg_color)",paddingBottom:20},children:(0,i.jsxs)(o.aV,{children:[(0,i.jsx)(o.$0,{header:"Тариф",footer:"Подписка не продливается автоматически",children:(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{defaultChecked:!0,name:"tariff",value:"1",onChange:()=>x("monthly")}),description:"VPN + Блокировка рекламы и трекеров",multiline:!0,children:"1 месяц за 49₽"})}),(null==a?void 0:a.has_first_use_discount)?(0,i.jsx)(o.$0,{header:"Промокоды и акции",footer:"Акция действую для новых пользователей. Нажмте, чтобы активировать бесплатный период.",children:(0,i.jsx)(o.bL,{before:(0,i.jsx)(f.G,{icon:m.Tab,size:"2x",style:{width:40,color:"var(--tgui--button_color)"}}),multiline:!0,subtitle:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:"2 недели"}),style:{boxShadow:"0px 0px 10px color-mix(in srgb, var(--tgui--button_color) 30%, transparent)"},onClick:()=>{var e;let n=new Headers;n.set("Authorization","tma ".concat(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp.initData)),fetch("https://api.infinitymainserver.tech/vpn-profiles/first-use-discount",{body:JSON.stringify({profile_id:t}),method:"POST",headers:n}).then(e=>e.json()).then(e=>{}).catch(e=>console.log(e))},children:"Попробовать бесплатно"})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)(o.$0,{header:"Выберите способ оплаты",footer:(0,i.jsxs)(o.$0.Footer,{children:["Доступ к VPN появится сразу после оплаты. Продолжая, вы принимаете ",(0,i.jsx)("u",{onClick:()=>console.log(2),style:{color:"var(--tgui--link_color)"},children:"Пользовательское соглашение"}),"."]}),children:[(0,i.jsx)(o.bL,{before:(0,i.jsx)(b.default,{alt:"Crpyto Bot @send logo",src:"/cryptobot.jpeg",height:40,width:40,style:{borderRadius:"50%"}}),after:(0,i.jsx)(o.YS,{style:{color:"var(--tgui--hint_color)"},children:"Дешевле"}),description:"USDT, TON, TRX, ETH",multiline:!0,onClick:()=>{var e;let n=new Headers;n.set("Authorization","tma ".concat(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp.initData)),fetch("https://api.infinitymainserver.tech/vpn-profiles/paid-url",{body:JSON.stringify({profile_id:t,tariff:p,payment_method:"cryptobot"}),method:"POST",headers:n}).then(e=>e.json()).then(e=>{var t;console.log(e),null===(t=window.Telegram)||void 0===t||t.WebApp.openLink(e.payment_url)}).catch(e=>console.log(e))},children:"Crypto Bot"}),(0,i.jsx)(o.bL,{before:(0,i.jsx)(f.G,{icon:m.X5K,size:"2x",style:{width:40,color:"var(--tgui--button_color)"}}),description:"Звезды Telegram",multiline:!0,children:"Банк любой страны"})]})]})})})})}function w(e){let{open:t,setOpen:n}=e,l=(0,r.useRef)(null);(0,v.F)(),console.log(l);let[s,a]=j(),[u,p]=(0,r.useState)("ikev2"),[x,g]=(0,r.useState)("nl"),[f,m]=(0,r.useState)(void 0),b=e=>{var t,n;m(e),void 0===e?null===(t=window.Telegram)||void 0===t||t.WebApp.MainButton.hideProgress():null===(n=window.Telegram)||void 0===n||n.WebApp.MainButton.showProgress(!0)},w=()=>{var e,t;let n=new Headers;n.set("Authorization","tma ".concat(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp.initData)),null===(t=window.Telegram)||void 0===t||t.WebApp.MainButton.showProgress(!1),fetch("https://api.infinitymainserver.tech/vpn-profiles",{body:JSON.stringify({protocol:u,country_code:x}),method:"POST",headers:n}).then(e=>e.json()).then(e=>{b(e.profile_id)}).catch(e=>console.log(e))};return(0,r.useEffect)(()=>{var e,n,i,o,r,l;if(t){null===(e=window.Telegram)||void 0===e||e.WebApp.MainButton.enable(),null===(n=window.Telegram)||void 0===n||n.WebApp.MainButton.setText("Добавить конфигурацию"),null===(i=window.Telegram)||void 0===i||i.WebApp.MainButton.show();let t=Math.random();localStorage.setItem("mainButtonCbHash",t.toString()),null===(o=window.Telegram)||void 0===o||o.WebApp.MainButton.onClick(()=>{t.toString()==localStorage.getItem("mainButtonCbHash")&&w()}),null===(r=window.Telegram)||void 0===r||r.WebApp.MainButton.setParams({has_shine_effect:!0})}else null===(l=window.Telegram)||void 0===l||l.WebApp.MainButton.hide()},[t,x,u,f]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.u_,{nested:!0,header:(0,i.jsx)(d.x,{after:(0,i.jsx)(h.A,{children:(0,i.jsx)(c.w,{onClick:()=>{var e;null===(e=window.Telegram)||void 0===e||e.WebApp.MainButton.hide(),n(!1)},style:{color:"var(--tgui--plain_foreground)"}})}),children:"Новая конфигурация"}),onOpenChange:e=>n(e),open:t,children:(0,i.jsx)("div",{style:{height:"100%",width:"100%",background:"var(--tgui--secondary_bg_color)",paddingBottom:20},children:(0,i.jsxs)(o.aV,{children:[(0,i.jsxs)(o.$0,{header:"Страна подключения",footer:"Для обхода ограничений рекомендуется взять Нидерланды",children:[(0,i.jsx)(o.bL,{Component:"label",ref:l,before:(0,i.jsx)(o.Nx,{name:"country",value:"1",defaultChecked:!0,onChange:()=>g("nl")}),multiline:!0,children:"\uD83C\uDDF3\uD83C\uDDF1 Нидерланды"}),(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{name:"country",value:"2",onChange:()=>g("ru")}),multiline:!0,children:"\uD83C\uDDF7\uD83C\uDDFA Россия"})]}),(0,i.jsxs)(o.$0,{header:"Протокол соединения",footer:"Подробную инструкцию по установке VPN конфигурации вы найдете после добавления профиля",children:[(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{defaultChecked:!0,name:"protocol",value:"1",onChange:()=>p("ikev2")}),description:(0,i.jsx)(i.Fragment,{children:"Добавляется на Android, Windows10, Linux, MacOS и IOS через настройки вашего устройства. Рекомендуется для техники Apple."}),multiline:!0,children:"IKEv2/IPSec MSCHAPv2"}),(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{name:"protocol",value:"2",onChange:()=>p("wg")}),description:"Соединение устанавливается через готовое приложение WireGuard на любом устройствe.",multiline:!0,children:"WireGuard"})]}),(0,i.jsx)(i.Fragment,{})]})})}),(0,i.jsx)(C,{profileId:f,setProfileId:b,currentPaidTo:void 0,paidCallback:e=>{e&&n(!1)}})]})}var y=n(568),_=n(4085),S=n(1970),T=n(6407),k=n(7693);function A(e){let{icon:t,title:n,children:l}=e,[s,a]=(0,r.useState)(!1);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(o.UQ,{expanded:s,onChange:()=>a(!s),children:[(0,i.jsx)(o.UQ.Summary,{children:(0,i.jsxs)("div",{style:{display:"flex",gap:10},children:[t,(0,i.jsx)("span",{children:n})]})}),(0,i.jsx)(o.UQ.Content,{children:(0,i.jsx)("div",{style:{padding:20},children:l})})]})})}var D=n(42),P=n.n(D);let I=r.createContext(e=>()=>{});function N(e){let[t,n]=(0,r.useState)(!1);return(0,i.jsxs)(I.Provider,{value:e=>()=>{P()(e),t?(n(!1),setTimeout(()=>n(!0),100)):n(!0)},children:[e.children,t&&(0,i.jsx)(o.A9,{style:{zIndex:1e4,textAlign:"center"},onClose:()=>n(!1),before:(0,i.jsx)(f.G,{icon:m.LEp}),children:"Текст скопирован"})]})}function W(e){let{color:t}=e;return(0,i.jsxs)("svg",{width:33,height:32,viewBox:"0 0 33 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{fill:t,height:"32",rx:"20%",width:"33"}),(0,i.jsx)("path",{d:"M18.459 13.2759H22.9912C23.1351 13.2759 23.2568 13.2261 23.3564 13.1265C23.4561 13.0269 23.5059 12.9051 23.5059 12.7612C23.5059 12.6174 23.4561 12.4984 23.3564 12.4043C23.2568 12.3047 23.1351 12.2549 22.9912 12.2549H18.459C18.3096 12.2549 18.1851 12.3047 18.0854 12.4043C17.9858 12.4984 17.936 12.6174 17.936 12.7612C17.936 12.9051 17.9858 13.0269 18.0854 13.1265C18.1851 13.2261 18.3096 13.2759 18.459 13.2759ZM18.459 16.5298H22.9912C23.1351 16.5298 23.2568 16.48 23.3564 16.3804C23.4561 16.2808 23.5059 16.1562 23.5059 16.0068C23.5059 15.8685 23.4561 15.7523 23.3564 15.6582C23.2568 15.5586 23.1351 15.5088 22.9912 15.5088H18.459C18.3096 15.5088 18.1851 15.5586 18.0854 15.6582C17.9858 15.7523 17.936 15.8685 17.936 16.0068C17.936 16.1562 17.9858 16.2808 18.0854 16.3804C18.1851 16.48 18.3096 16.5298 18.459 16.5298ZM18.459 19.7754H22.9912C23.1351 19.7754 23.2568 19.7284 23.3564 19.6343C23.4561 19.5347 23.5059 19.4157 23.5059 19.2773C23.5059 19.1335 23.4561 19.0117 23.3564 18.9121C23.2568 18.807 23.1351 18.7544 22.9912 18.7544H18.459C18.3096 18.7544 18.1851 18.807 18.0854 18.9121C17.9858 19.0117 17.936 19.1335 17.936 19.2773C17.936 19.4157 17.9858 19.5347 18.0854 19.6343C18.1851 19.7284 18.3096 19.7754 18.459 19.7754ZM9.80957 19.8335H16.2925C16.4253 19.8335 16.5249 19.792 16.5913 19.709C16.6632 19.626 16.6992 19.5236 16.6992 19.4019C16.6992 19.2026 16.6245 18.9508 16.4751 18.6465C16.3312 18.3366 16.1071 18.0267 15.8027 17.7168C15.5039 17.4014 15.1248 17.1385 14.6655 16.9282C14.2062 16.7179 13.6667 16.6128 13.0469 16.6128C12.4271 16.6128 11.8875 16.7179 11.4282 16.9282C10.9744 17.1385 10.5954 17.4014 10.291 17.7168C9.99219 18.0267 9.76807 18.3366 9.61865 18.6465C9.47477 18.9508 9.40283 19.2026 9.40283 19.4019C9.40283 19.5236 9.43604 19.626 9.50244 19.709C9.57438 19.792 9.67676 19.8335 9.80957 19.8335ZM13.0469 16.0317C13.5505 16.0317 13.9793 15.8436 14.3335 15.4673C14.6877 15.091 14.8647 14.6178 14.8647 14.0479C14.8647 13.6937 14.7817 13.37 14.6157 13.0767C14.4552 12.7834 14.2367 12.5482 13.96 12.3711C13.6888 12.194 13.3844 12.1055 13.0469 12.1055C12.7148 12.1055 12.4105 12.194 12.1338 12.3711C11.8571 12.5482 11.6357 12.7834 11.4697 13.0767C11.3092 13.37 11.229 13.6937 11.229 14.0479C11.229 14.6178 11.4061 15.091 11.7603 15.4673C12.12 15.8436 12.5488 16.0317 13.0469 16.0317ZM9.31982 23.6519C8.45101 23.6519 7.79801 23.436 7.36084 23.0044C6.9292 22.5783 6.71338 21.9391 6.71338 21.0869V10.9434C6.71338 10.0856 6.9292 9.44368 7.36084 9.01758C7.79801 8.58594 8.45101 8.37012 9.31982 8.37012H23.6802C24.5545 8.37012 25.2075 8.58594 25.6392 9.01758C26.0708 9.44922 26.2866 10.0911 26.2866 10.9434V21.0869C26.2866 21.9391 26.0708 22.5783 25.6392 23.0044C25.2075 23.436 24.5545 23.6519 23.6802 23.6519H9.31982Z",fill:"white"})]})}function O(e){let{color:t}=e;return(0,i.jsxs)("svg",{width:33,height:32,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{fill:t,height:"512",rx:"20%",width:"512"}),(0,i.jsx)("path",{d:"m238 53 35 8v2c-15 2-30-4-45-5 11 7 23 11 35 15-19 16-35-5-56 9 20 10 19 8 21 27-9 1-24 10-27 16 13 3 28 0 41 8-4 3-14 7-18 10 9 2 20-2 25 1 19 16 54 38 64 60 17 37-22 77-60 83-53 11-83 66-64 117 19 50 78 72 125 46 66-40 56-108 16-145-2-2-4-2-6 0-14 9-29 17-45 24 36 8 41 35 37 54-13 48-78 37-85-4-3-19 7-38 24-46 59-26 87-30 104-97 6-38-3-58-31-80-11-11-33-18-40-35-1-2 1-6 3-6 10-2 49-3 49-1 7 7 13-4 16-9-10-2-21-1-29-1-1 0-3-2-4-3 1-1 3-2 4-2h41c0-7-9-17-18-19v3c-8 1-16-1-24-4-4-3-7-9-11-11-16-9-33-16-54-16-10 0-17 1-23 1zm74 30 3 3-4 2c-2 1-3 0-4-1-2-3 4-5 5-4zm-120 96c-54 33-51 109-3 139 4 2 6 2 8-1 12-15 23-22 36-30-25-4-38-16-37-33-4-60 83-54 74 2-2 10-8 19-16 25 27-6 47-21 55-48 2-8 2-19-2-26-30-44-75-53-115-28zm-62 195c16-7 33-10 49-13 1-13 5-26 13-36-30 0-55 20-62 49z",fill:"#fff"})]})}function L(e){let{currentName:t,profileId:n}=e,[l,s]=(0,r.useState)(!1),[a,u]=(0,r.useState)(t),[p,x]=(0,r.useState)(!1),[g,v]=j(),b=()=>{var e;x(!0);let t=new Headers;t.set("Authorization","tma ".concat(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp.initData)),fetch("https://api.infinitymainserver.tech/vpn-profiles/title",{body:JSON.stringify({profile_id:n,new_title:a}),method:"PATCH",headers:t}).then(e=>{v()}).catch(e=>{console.error(e)}).finally(()=>{x(!1)}),s(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Tn,{before:(0,i.jsx)(f.G,{icon:m.IwR,size:"xl"}),mode:"default",onClick:()=>s(!0),children:"Переименовать"}),(0,i.jsx)(o.u_,{header:(0,i.jsx)(d.x,{after:(0,i.jsx)(h.A,{children:(0,i.jsx)(c.w,{onClick:()=>s(!1),style:{color:"var(--tgui--plain_foreground)"}})}),children:"Новое имя"}),nested:!0,onOpenChange:e=>s(e),open:l,children:(0,i.jsxs)(o.$0,{header:"Новое имя",children:[(0,i.jsx)(o.II,{onKeyDown:e=>"Enter"===e.key?b():null,placeholder:"Введите новое имя",value:a,onChange:e=>u(e.target.value)}),(0,i.jsx)(o.zx,{stretched:!0,disabled:a==t,loading:p,onClick:b,children:"Сохранить"})]})})]})}function M(e){let{vpnProfile:t,setVpnPreviewModel:n}=e,[l,s]=(0,r.useState)(!1),[a,u]=(0,r.useState)(!1),[p,x]=j(),[g,v]=(0,r.useState)("IKev2IPsec"==t.settings.protocol?"ikev2":"wg"),[b,C]=(0,r.useState)(t.country_code),[w,y]=(0,r.useState)(!1),_=()=>{v("IKev2IPsec"==t.settings.protocol?"ikev2":"wg"),C(t.country_code),y(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Tn,{before:(0,i.jsx)(f.G,{size:"xl",icon:m.gr5}),onClick:()=>s(!0),children:"Перегенерировать настройки"}),(0,i.jsxs)(o.u_,{header:(0,i.jsx)(d.x,{after:(0,i.jsx)(h.A,{children:(0,i.jsx)(c.w,{onClick:()=>{_(),s(!1)},style:{color:"var(--tgui--plain_foreground)"}})}),children:"Настройки профиля"}),nested:!0,onOpenChange:e=>{_(),s(e)},open:l,style:{background:"var(--tgui--secondary_bg_color)"},children:[(0,i.jsxs)(o.$0,{header:"Страна подключения",footer:"Для обхода ограничений рекомендуется взять Нидерланды",children:[(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{name:"country",value:"1",defaultChecked:"nl"===t.country_code,onChange:()=>C("nl")}),multiline:!0,children:"\uD83C\uDDF3\uD83C\uDDF1 Нидерланды"}),(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{name:"country",value:"2",defaultChecked:"ru"===t.country_code,onChange:()=>C("ru")}),multiline:!0,children:"\uD83C\uDDF7\uD83C\uDDFA Россия"})]}),(0,i.jsxs)(o.$0,{header:"Протокол соединения",footer:"Подробную инструкцию по установке VPN конфигурации вы найдете после добавления профиля",children:[(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{defaultChecked:"IKev2IPsec"===t.settings.protocol,name:"protocol",value:"1",onChange:()=>v("ikev2")}),description:(0,i.jsx)(i.Fragment,{children:"Добавляется на Android, Windows10, Linux, MacOS и IOS через настройки вашего устройства. Рекомендуется для техники Apple."}),multiline:!0,children:"IKEv2/IPSec MSCHAPv2"}),(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.Nx,{defaultChecked:"WG"===t.settings.protocol,name:"protocol",value:"2",onChange:()=>v("wg")}),description:"Соединение устанавливается через готовое приложение WireGuard на любом устройствe.",multiline:!0,children:"WireGuard"})]}),(0,i.jsx)(o.$0,{header:"Настройки для входа",footer:"После обновления настроек старые конфигурации на ваших устройствах перестанут работать, даже если вы не отмечали сброс текущего доступа",children:(0,i.jsx)(o.bL,{Component:"label",before:(0,i.jsx)(o.XZ,{onChange:e=>y(e.target.checked),name:"checkbox",value:"2"}),description:"Текущие установленные конфигурации на устройствах перетанут работать. Будет создан новый пользователь.",multiline:!0,children:"Сбросить текущий доступ"})}),(0,i.jsx)(o.$0,{header:"Сохранить",children:(0,i.jsx)(o.zx,{stretched:!0,disabled:g===("IKev2IPsec"==t.settings.protocol?"ikev2":"wg")&&b===t.country_code&&!w,loading:a,onClick:()=>{var e;u(!0);let i=new Headers;i.set("Authorization","tma ".concat(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp.initData)),fetch("https://api.infinitymainserver.tech/vpn-profiles/new-configuration",{body:JSON.stringify({profile_id:t.id,new_country_code:b,new_protocol:g}),method:"POST",headers:i}).then(e=>{s(!1),n(!1),x()}).catch(e=>{console.error(e)}).finally(()=>{u(!1)}),s(!1)},children:"Обновить настройки"})})]})]})}function z(e){var t;let{vpnProfile:n}=e,l=(0,r.useContext)(I),[s,a]=(0,r.useState)(!1),u=new Date(n.paid_to).getTime()<Date.now(),[x,g]=j();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.bL,{before:"WG"==n.settings.protocol?(0,i.jsx)(O,{color:u?"var(--tgui--hint_color)":"var(--tgui--button_color)"}):(0,i.jsx)(W,{color:u?"var(--tgui--hint_color)":"var(--tgui--button_color)"}),subtitle:"nl"==(t=n.country_code)?"Нидерланды":"de"==t?"Германия":"ru"==t?"Россия":void 0,after:(0,i.jsx)(o.YS,{style:{color:"var(--tgui--hint_color)"},children:u?"Не оплачен":p(n.paid_to,1,"")}),onClick:()=>a(!0),children:n.title}),(0,i.jsx)(o.u_,{header:(0,i.jsx)(d.x,{after:(0,i.jsx)(h.A,{children:(0,i.jsx)(c.w,{onClick:()=>a(!1),style:{color:"var(--tgui--plain_foreground)"}})}),children:n.title}),nested:!0,onOpenChange:e=>a(e),open:s,children:(0,i.jsx)("div",{style:{height:"100%",width:"100%",background:"var(--tgui--secondary_bg_color)",paddingBottom:20},children:(0,i.jsxs)(o.aV,{children:[(0,i.jsx)(o.$0,{header:"Тариф",children:(0,i.jsx)(o.bL,{before:(0,i.jsx)(f.G,{icon:k.T,style:{fontSize:20,color:"var(--tgui--button_color)"}}),multiline:!0,subtitle:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:u?"Ваша прошлая подписка истекла. VPN пока что не будет работать :(":(0,i.jsxs)(i.Fragment,{children:["Истекает через ",p(n.paid_to,2," и ")]})}),style:{},children:"Продлить подписку"})}),"IKev2IPsec"==n.settings.protocol?(0,i.jsxs)(o.$0,{header:"Способы подключения",footer:"Одновременно может работать только 1 устрйство. Можно подключить любое устройство с поддержкой протокола IKEv2/IPSec через добавление VPN соединения вручную",children:[(0,i.jsxs)(A,{title:"IPhone, IPad",icon:(0,i.jsx)(f.G,{size:"lg",icon:y.Av$}),children:[(0,i.jsx)("p",{children:(0,i.jsxs)(o.YS,{style:{wordBreak:"break-all"},children:[(0,i.jsx)(T.c,{onClick:l("https://api.infinitymainserver.tech".concat(n.settings.settings.mobileconfig_uri)),style:{width:"100%"},mode:"bezeled",text:"Скопировать ссылку",children:(0,i.jsx)(f.G,{icon:S.kZ_,size:"xl"})}),"\xa0"]})}),(0,i.jsx)("p",{children:(0,i.jsxs)(o.YS,{children:["Скопируйте ссылку, откройте ее в браузере ",(0,i.jsx)(f.G,{icon:S.GTN})," ",(0,i.jsx)("b",{children:"Safari"})," и подтвердите установку. Перейдите в ",(0,i.jsx)("b",{children:"Настройки > Профили"})," и установите предложенный профиль. После этого вы можете включить соединение в ",(0,i.jsx)("b",{children:"Настройки > VPN > ShieldTunnel"})]})}),(0,i.jsx)("br",{}),(0,i.jsx)("p",{children:(0,i.jsx)(o.YS,{children:(0,i.jsxs)("b",{children:["Ссылка открывается только в браузере ",(0,i.jsx)(f.G,{icon:S.GTN})," Safari. Не работает в приложении Telegram."]})})})]}),(0,i.jsx)(A,{title:"MacOS",icon:(0,i.jsx)(f.G,{size:"lg",icon:_.tc}),children:(0,i.jsx)("p",{children:"TODO"})}),(0,i.jsx)(A,{title:"Window",icon:(0,i.jsx)(f.G,{size:"lg",icon:y.ts2}),children:(0,i.jsx)("p",{children:"TODO"})}),(0,i.jsx)(A,{title:"Android",icon:(0,i.jsx)(f.G,{size:"lg",icon:y.usd}),children:(0,i.jsx)("p",{children:"TODO"})}),(0,i.jsx)(A,{title:"Linux",icon:(0,i.jsx)(f.G,{size:"lg",icon:y.qJE}),children:(0,i.jsx)("p",{children:"TODO"})})]}):(0,i.jsx)(i.Fragment,{}),(0,i.jsx)(o.$0,{header:"Техническая поддержка",children:(0,i.jsx)(o.bL,{before:(0,i.jsx)(f.G,{icon:S.X8G,color:"#FEDA71",size:"xl"}),subtitle:(0,i.jsx)("span",{children:"Нажмите, чтобы открыть диалог с технической поддержкой"}),multiline:!0,children:"Есть вопросы?"})}),"IKev2IPsec"==n.settings.protocol?(0,i.jsxs)(o.$0,{header:"Ручная настройка VPN соединения",footer:"Значения копируются при нажатии",children:[(0,i.jsx)(o.bL,{after:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:"IKEv2/IPSec"}),onClick:l("IKEv2/IPSec"),children:"Протокол"}),(0,i.jsx)(o.bL,{after:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:n.settings.settings.host}),onClick:l(n.settings.settings.host),children:"Адрес хоста"}),(0,i.jsx)(o.bL,{after:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:n.settings.settings.eap_login}),onClick:l(n.settings.settings.eap_login),children:"Логин"}),(0,i.jsx)(o.bL,{after:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:n.settings.settings.eap_password}),onClick:l(n.settings.settings.eap_password),children:"Пароль"}),(0,i.jsx)(o.bL,{after:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:n.settings.settings.eap_login}),onClick:l(n.settings.settings.eap_login),children:"Локальный ID"}),(0,i.jsx)(o.bL,{after:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:n.settings.settings.host}),onClick:l(n.settings.settings.host),children:"Удаленный ID"}),(0,i.jsx)(o.bL,{after:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:"MSCHAPv2"}),onClick:l("MSCHAPv2"),children:"Авторизация"})]}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)(o.$0,{header:"Управление конфигурацией",footer:"Генерация новых настроек поможет изменить протокол, страну и данные авторизации, сохраняя подписку на эту конфигурацию. После перегенераци конфигурацию нужно будет установить на устройство заново.",children:[(0,i.jsx)(L,{currentName:n.title,profileId:n.id}),(0,i.jsx)(M,{vpnProfile:n,setVpnPreviewModel:a}),(0,i.jsx)(o.Tn,{before:(0,i.jsx)(f.G,{icon:S.Vui,size:"xl"}),onClick:()=>{var e;null===(e=window.Telegram)||void 0===e||e.WebApp.showPopup({title:"Подтвердите удаление",message:new Date(n.paid_to).getTime()>Date.now()?"У этой конфигурации еще есть подписка. Удаление профиля не вернет ваши средства. Вы можете изменить тип и страну конфигурации в настройках профиля без удаления, чтобы сохранить подписку":void 0,buttons:[{id:"remove",type:"destructive",text:"Удалить"},{id:"cancel",type:"default",text:"Отменить"}]},e=>{if("remove"===e){var t;let e=new Headers;e.set("Authorization","tma ".concat(null===(t=window.Telegram)||void 0===t?void 0:t.WebApp.initData)),fetch("https://api.infinitymainserver.tech/vpn-profiles",{body:JSON.stringify({profile_id:n.id}),method:"DELETE",headers:e}).then(e=>{g(),a(!1)}).catch(e=>{console.error(e)}).finally(()=>{})}})},mode:"destructive",children:"Удалить конфигурацию"})]})]})})})]})}function F(){let[e,t]=j(),[n,l]=(0,r.useState)(!1);return console.log(e),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{open:n,setOpen:l}),(0,i.jsxs)(o.aV,{style:{padding:15},children:[(0,i.jsx)(o.$0,{style:{borderRadius:10,boxShadow:"0px 0px 10px 1px rgba(0, 0, 0, 0.05)"},header:"Управление конфигурациями",children:(0,i.jsx)(o.bL,{before:(0,i.jsx)(a.Q,{color:"var(--tgui--button_color)"}),subtitle:(0,i.jsx)("span",{style:{color:"var(--tgui--hint_color)"},children:"Подключите новое устройство"}),onClick:()=>{var e;null===(e=window)||void 0===e||e.Telegram.WebApp.HapticFeedback.impactOccurred("soft"),l(!0)},children:"Добавить VPN"})}),void 0!==e?e.vpn_profiles.length>0?(0,i.jsx)(o.$0,{header:"VPN Конфигурации",footer:"Нажмите на конфигурацию, чтобы подключить VPN соединение",children:e.vpn_profiles.map(e=>(0,i.jsx)(z,{vpnProfile:e},e.id))}):(0,i.jsx)(o.Vm,{header:"VPN не подключен",description:"Добавьте новый VPN и подключите свое устройство к безопасной сети",style:{position:"absolute",width:"90%",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,i.jsx)(s.J5,{autoplay:!0,loop:!0,src:"/shield-tunnel-test-webapp",style:{height:180}})}):(0,i.jsx)(i.Fragment,{})]})]})}var H=n(9057);function G(){let[e,t]=(0,r.useState)();(0,r.useEffect)(()=>{let e=new l.K3;t(e),e.WebApp.ready()},[]);let[n,s]=(0,r.useState)(!1);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(H.jl,{children:(0,i.jsx)(o.h7,{platform:(null==e?void 0:e.WebApp.platform)=="ios"||(null==e?void 0:e.WebApp.platform)=="macos"?"ios":"base",children:(0,i.jsx)(N,{children:(0,i.jsx)("div",{style:{height:"100%",width:"100%",background:"var(--tgui--secondary_bg_color)"},children:(0,i.jsx)(g,{children:(0,i.jsx)(F,{})})})})})})})}}},function(e){e.O(0,[676,958,943,231,971,23,744],function(){return e(e.s=9461)}),_N_E=e.O()}]);